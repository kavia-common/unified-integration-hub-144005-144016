{"is_source_file": true, "format": "TypeScript", "description": "This file provides utility functions for API communication, including tenant ID management, URL building, OAuth workflows, connector management, and a generic fetch wrapper. It centralizes logic related to backend API interactions in a front-end environment.", "external_files": ["fetch"], "external_methods": ["fetch"], "published": ["HttpMethod", "ApiOptions", "getTenantId", "setTenantId", "apiFetch", "buildOAuthLoginUrl", "getDefaultCallbackUrl", "completeOAuthCallback", "disconnectConnector", "getConnectors", "searchConnector", "connectWithStoredCredentials", "apiGet", "apiPost"], "classes": [], "methods": [{"name": "export function getTenantId(): string | null { getTenantId", "description": "Returns the current tenant ID stored in localStorage, or null if unavailable.", "scope": "", "scopeKind": ""}, {"name": "export function setTenantId(id: string) { setTenantId", "description": "Stores the provided tenant ID in localStorage for subsequent API calls.", "scope": "", "scopeKind": ""}, {"name": "export async function apiFetch<T = unknown>(path: string, opts: ApiOptions = {}): Promise<T> { apiFetch", "description": "A generic wrapper around fetch that handles tenant headers, JSON serialization/deserialization, and error handling.", "scope": "", "scopeKind": ""}, {"name": "export function buildOAuthLoginUrl(connectorId: string, tenantId?: string | null, redirectTo?: s/ buildOAuthLoginUrl", "description": "Constructs the OAuth login URL for a connector, including tenant information and redirect parameters.", "scope": "", "scopeKind": ""}, {"name": "export function getDefaultCallbackUrl(connectorId: string) { getDefaultCallbackUrl", "description": "Builds the default OAuth callback URL based on current window location for a specific connector.", "scope": "", "scopeKind": ""}, {"name": "export async function completeOAuthCallback(connectorId: string, code: string, state?: string | / completeOAuthCallback", "description": "Handles OAuth callback by calling the backend with code and optional state parameters.", "scope": "", "scopeKind": ""}, {"name": "export async function disconnectConnector(connectorId: string): Promise<void> { disconnectConnector", "description": "Attempts to disconnect a connector by first trying DELETE, then falling back to POST.", "scope": "", "scopeKind": ""}, {"name": "export async function getConnectors(): Promise<ConnectorListItem[] | unknown> { getConnectors", "description": "Retrieves a list of available connectors.", "scope": "", "scopeKind": ""}, {"name": "export async function searchConnector(connectorId: string, q: string): Promise<unknown> { searchConnector", "description": "Performs a search within a specified connector.", "scope": "", "scopeKind": ""}, {"name": "export async function connectWithStoredCredentials(connectorId: string): Promise<unknown> { connectWithStoredCredentials", "description": "Attempts to connect a connector using stored credentials.", "scope": "", "scopeKind": ""}, {"name": "export async function apiGet<T>(path: string, tenantId?: string): Promise<T> { apiGet", "description": "Convenience wrapper for GET requests, optionally overriding the tenant ID.", "scope": "", "scopeKind": ""}, {"name": "export async function apiPost<T, B = unknown>(path: string, body: B, tenantId?: string): Promise/ apiPost", "description": "Convenience wrapper for POST requests, optionally overriding the tenant ID.", "scope": "", "scopeKind": ""}, {"name": "function getBaseUrl() { getBaseUrl", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "localStorage.getItem", "localStorage.setItem", "JSON.stringify", "JSON.parse", "apiFetch", "getBaseUrl", "new URL", "URLSearchParams", "window.location.origin", "window.location", "process.env.NEXT_PUBLIC_BACKEND_URL", "headers.get", "headers.set", "headers", "BodyInit", "fetchBody", "AbortSignal", "res.headers.get", "res.json", "res.text"], "search-terms": ["api utilities", "tenant-aware headers", "OAuth URL build", "connector management", "TypeScript API wrapper", "localStorage tenant ID", "backend communication", "fetch wrapper"], "state": 2, "file_id": 12, "knowledge_revision": 113, "git_revision": "f7aeffbdb1ae19b6adbe89b531a70e8094698a04", "revision_history": [{"25": ""}, {"43": ""}, {"58": "629436f63a05725b08082fbee178778c90f4aced"}, {"69": "629436f63a05725b08082fbee178778c90f4aced"}, {"70": "629436f63a05725b08082fbee178778c90f4aced"}, {"75": "629436f63a05725b08082fbee178778c90f4aced"}, {"78": "2e40eac2fd81498e942786633b8efa34a1dbc472"}, {"79": "2e40eac2fd81498e942786633b8efa34a1dbc472"}, {"87": "2e40eac2fd81498e942786633b8efa34a1dbc472"}, {"113": "f7aeffbdb1ae19b6adbe89b531a70e8094698a04"}], "ctags": [{"_type": "tag", "name": "ApiError", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export type ApiError = Error & { status?: number; payload?: unknown };$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ApiOptions", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export type ApiOptions = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ConnectorListItem", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export type ConnectorListItem = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "HttpMethod", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export type HttpMethod = 'GET' | 'POST' | 'DELETE';$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "OAuthCallbackResponse", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export type OAuthCallbackResponse = Record<string, unknown>;$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "apiFetch", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export async function apiFetch<T = unknown>(path: string, opts: ApiOptions = {}): Promise<T> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "apiGet", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export async function apiGet<T>(path: string, tenantId?: string): Promise<T> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "apiPost", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export async function apiPost<T, B = unknown>(path: string, body: B, tenantId?: string): Promise/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^  const base = getBaseUrl();$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^  const base = getBaseUrl();$/", "language": "TypeScript", "kind": "constant", "scope": "buildOAuthLoginUrl", "scopeKind": "function"}, {"_type": "tag", "name": "buildOAuthLoginUrl", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export function buildOAuthLoginUrl(connectorId: string, tenantId?: string | null, redirectTo?: s/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "callback", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^  const callback = redirectTo || getDefaultCallbackUrl(connectorId);$/", "language": "TypeScript", "kind": "constant", "scope": "buildOAuthLoginUrl", "scopeKind": "function"}, {"_type": "tag", "name": "completeOAuthCallback", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export async function completeOAuthCallback(connectorId: string, code: string, state?: string | /", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "connectWithStoredCredentials", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export async function connectWithStoredCredentials(connectorId: string): Promise<unknown> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "contentType", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^  const contentType = res.headers.get('content-type') || '';$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "disconnectConnector", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export async function disconnectConnector(connectorId: string): Promise<void> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "env", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^  const env = process.env.NEXT_PUBLIC_BACKEND_URL;$/", "language": "TypeScript", "kind": "constant", "scope": "getBaseUrl", "scopeKind": "function"}, {"_type": "tag", "name": "errPayload", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^    const errPayload: unknown = isJson ? await res.json().catch(() => ({})) : await res.text().c/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^    const error = new Error(`API error: ${res.status}`) as ApiError;$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "getBaseUrl", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^function getBaseUrl() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getConnectors", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export async function getConnectors(): Promise<ConnectorListItem[] | unknown> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getDefaultCallbackUrl", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export function getDefaultCallbackUrl(connectorId: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getTenantId", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^  const tenant = opts.tenantId ?? getTenantId();$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "getTenantId", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export function getTenantId(): string | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^  const headers: Record<string, string> = {$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "isJson", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^  const isJson = contentType.includes('application\\/json');$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "origin", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^  const origin = window.location.origin;$/", "language": "TypeScript", "kind": "constant", "scope": "getDefaultCallbackUrl", "scopeKind": "function"}, {"_type": "tag", "name": "qp", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^  const qp = new URLSearchParams({ code });$/", "language": "TypeScript", "kind": "constant", "scope": "completeOAuthCallback", "scopeKind": "function"}, {"_type": "tag", "name": "qp", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^  const qp = new URLSearchParams({ q });$/", "language": "TypeScript", "kind": "constant", "scope": "searchConnector", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^  const res = await fetch(url, {$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "searchConnector", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export async function searchConnector(connectorId: string, q: string): Promise<unknown> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "setTenantId", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^export function setTenantId(id: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^      const status = Number((e as { status?: number }).status ?? 0);$/", "language": "TypeScript", "kind": "constant", "scope": "disconnectConnector", "scopeKind": "function"}, {"_type": "tag", "name": "tenant", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^  const tenant = opts.tenantId ?? getTenantId();$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^  const url = `${base}${path}`;$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144016/unified_connector_frontend/src/utils/api.ts", "pattern": "/^  const url = new URL(`${base}\\/connectors\\/${connectorId}\\/oauth\\/login`);$/", "language": "TypeScript", "kind": "constant", "scope": "buildOAuthLoginUrl", "scopeKind": "function"}], "hash": "a7b9f2be049fbe83d52ae255619a1117", "format-version": 4, "code-base-name": "unified_connector_frontend", "filename": "unified_connector_frontend/src/utils/api.ts"}